{
  "permissions": {
    "allow": [
      "WebFetch(domain:github.com)",
      "Bash(powershell -Command \"\n$word = New-Object -ComObject Word.Application\n$word.Visible = $false\n$doc = $word.Documents.Open\\(''G:\\\\UnityGames\\\\VoidWarranty\\\\VoidWarranty_GDD_v0.5.docx''\\)\n$doc.Content.Text\n$doc.Close\\(\\)\n$word.Quit\\(\\)\n[System.Runtime.Interopservices.Marshal]::ReleaseComObject\\($word\\) | Out-Null\n\")",
      "Bash(powershell:*)",
      "Bash(\"G:\\\\UnityGames\\\\VoidWarranty\\\\VoidWarranty_GDD_v0.6_Scripts_associated.txt\" << 'ENDOFFILE'\n\n--------------------------------------------------------------------------------\nFICHIER: IInteractable.cs\nPATH: Assets/_Game/Scripts/Core/IInteractable.cs\n--------------------------------------------------------------------------------\nusing UnityEngine;\n\nnamespace VoidWarranty.Core\n{\n    // Tout objet qui veut être cliqué DOIT posséder un script qui implémente ça.\n    public interface IInteractable\n    {\n        // On passe l'info de QUI interagit \\(pour savoir qui a appuyé sur le bouton\\)\n        void Interact\\(GameObject interactor\\);\n\n        // Optionnel : Pour afficher un texte \"Appuyez sur E pour ouvrir\"\n        string GetInteractionPrompt\\(\\);\n    }\n}\n\n--------------------------------------------------------------------------------\n\n--------------------------------------------------------------------------------\nFICHIER: ItemData.cs\nPATH: Assets/_Game/Scripts/Core/ItemData.cs\n--------------------------------------------------------------------------------\nusing UnityEngine;\n\nnamespace VoidWarranty.Core\n{\n    // Ajout de Toolbox et Scanner\n    public enum ItemType\n    {\n        Generic,\n        Motor,\n        Fuse,\n        Coolant,\n        Toolbox,\n        ToolboxAdvanced,\n        Scanner\n    }\n\n    [CreateAssetMenu\\(fileName = \"New Item\", menuName = \"VoidWarranty/Item Data\"\\)]\n    public class ItemData : ScriptableObject\n    {\n        [Header\\(\"Clés de Traduction\"\\)]\n        public string NameKey = \"ITEM_NAME\";\n        public string DescriptionKey = \"ITEM_DESC\";\n\n        [Header\\(\"Gameplay\"\\)]\n        public ItemType Type = ItemType.Generic;\n        public bool IsDefective = false;\n        public int ScrapValue = 10;\n\n        [Header\\(\"Physique\"\\)]\n        public float Mass = 5f;\n        public float LinearDamping = 0f;\n        public float AngularDamping = 10f;\n\n        // --- NOUVEAU : Positionnement en main ---\n        [Header\\(\"Position en Main \\(Offset\\)\"\\)]\n        // Par défaut \\(0,0,0\\) = Sur le HoldPoint exact\n        public Vector3 HeldPositionOffset = Vector3.zero;\n\n        // Rotation ajoutée \\(ex: incliner le scanner vers le visage\\)\n        public Vector3 HeldRotationOffset = Vector3.zero;\n    }\n}\n\n--------------------------------------------------------------------------------\n\n--------------------------------------------------------------------------------\nFICHIER: LocalizationManager.cs\nPATH: Assets/_Game/Scripts/Core/LocalizationManager.cs\n--------------------------------------------------------------------------------\nusing UnityEngine;\n\nnamespace VoidWarranty.Core\n{\n    public class LocalizationManager : MonoBehaviour\n    {\n        public static LocalizationManager Instance;\n\n        [Header\\(\"Langue Active\"\\)]\n        [SerializeField] private LocalizationTable _currentLanguage;\n\n        private void Awake\\(\\)\n        {\n            if \\(Instance == null\\) Instance = this;\n            else Destroy\\(gameObject\\);\n\n            if \\(_currentLanguage != null\\)\n            {\n                _currentLanguage.Initialize\\(\\);\n                Debug.Log\\($\"Langue chargée : {_currentLanguage.LanguageName}\"\\);\n            }\n        }\n\n        public static string Get\\(string key\\)\n        {\n            if \\(Instance == null\\) return $\"[NO_MANAGER:{key}]\";\n            if \\(Instance._currentLanguage == null\\) return $\"[NO_LANG:{key}]\";\n\n            return Instance._currentLanguage.Get\\(key\\);\n        }\n    }\n}\n\n--------------------------------------------------------------------------------\n\n--------------------------------------------------------------------------------\nFICHIER: LocalizationTable.cs\nPATH: Assets/_Game/Scripts/Core/LocalizationTable.cs\n--------------------------------------------------------------------------------\nusing UnityEngine;\nusing System.Collections.Generic;\n\nnamespace VoidWarranty.Core\n{\n    [CreateAssetMenu\\(fileName = \"New Language\", menuName = \"VoidWarranty/Localization Table\"\\)]\n    public class LocalizationTable : ScriptableObject\n    {\n        [Header\\(\"Configuration\"\\)]\n        public string LanguageName = \"English\";\n        public string LanguageCode = \"en_US\";\n\n        [Header\\(\"Import \\(Fichier CSV\\)\"\\)]\n        [Tooltip\\(\"Glisse ton fichier .csv ici\"\\)]\n        public TextAsset CsvFile;\n\n        [Header\\(\"Données \\(Générées auto\\)\"\\)]\n        [SerializeField] private List<TranslationEntry> _entries;\n\n        // Dictionnaire pour la recherche rapide en jeu\n        private Dictionary<string, string> _lookup;\n\n        // --- BOUTON D'IMPORTATION ---\n        [ContextMenu\\(\"Importer depuis CSV\"\\)]\n        public void ImportFromCsv\\(\\)\n        {\n            if \\(CsvFile == null\\)\n            {\n                Debug.LogError\\(\"Aucun fichier CSV assigné !\"\\);\n                return;\n            }\n\n            _entries = new List<TranslationEntry>\\(\\);\n\n            // On découpe les lignes\n            string[] lines = CsvFile.text.Split\\('\\\\n'\\);\n\n            foreach \\(string line in lines\\)\n            {\n                if \\(string.IsNullOrWhiteSpace\\(line\\)\\) continue;\n                if \\(line.StartsWith\\(\"KEY;\"\\)\\) continue; // On ignore l'en-tête\n\n                // On découpe au point-virgule\n                string[] parts = line.Split\\(';'\\);\n\n                if \\(parts.Length >= 2\\)\n                {\n                    string key = parts[0].Trim\\(\\);\n                    string value = parts[1].Trim\\(\\);\n\n                    // Gestion des sauts de ligne \\(Excel utilise parfois <br> ou \\\\n\\)\n                    value = value.Replace\\(\"<br>\", \"\\\\n\"\\).Replace\\(\"\\\\\\\\n\", \"\\\\n\"\\);\n\n                    _entries.Add\\(new TranslationEntry { Key = key, Value = value }\\);\n                }\n            }\n\n            Debug.Log\\($\"Succès ! {_entries.Count} traductions importées depuis {CsvFile.name}.\"\\);\n        }\n\n        // --- INITIALISATION RUNTIME ---\n        public void Initialize\\(\\)\n        {\n            _lookup = new Dictionary<string, string>\\(\\);\n            foreach \\(var entry in _entries\\)\n            {\n                if \\(!_lookup.ContainsKey\\(entry.Key\\)\\)\n                {\n                    _lookup.Add\\(entry.Key, entry.Value\\);\n                }\n            }\n        }\n\n        public string Get\\(string key\\)\n        {\n            if \\(_lookup == null\\) Initialize\\(\\);\n\n            if \\(_lookup.TryGetValue\\(key, out string value\\)\\) return value;\n\n            return $\"[{key}]\"; // Retourne [CLÉ_MANQUANTE] pour debug\n        }\n\n        [System.Serializable]\n        public struct TranslationEntry\n        {\n            public string Key;\n            [TextArea] public string Value;\n        }\n    }\n}\n\n--------------------------------------------------------------------------------\n\nENDOFFILE)",
      "Bash(\"G:\\\\UnityGames\\\\VoidWarranty\\\\VoidWarranty_GDD_v0.6_Scripts_associated.txt\" << 'ENDOFFILE'\n\n--------------------------------------------------------------------------------\nFICHIER: ColorCube.cs\nPATH: Assets/_Game/Scripts/Interaction/ColorCube.cs\n--------------------------------------------------------------------------------\nusing UnityEngine;\nusing VoidWarranty.Core;\n\nnamespace VoidWarranty.Interaction\n{\n    public class ColorCube : MonoBehaviour/*, IInteractable*/\n    {\n        public void Interact\\(GameObject interactor\\)\n        {\n            Debug.Log\\(\"Interaction reçue ! Changement de couleur.\"\\);\n\n            // Juste pour le test visuel local immédiat\n            GetComponent<Renderer>\\(\\).material.color = Random.ColorHSV\\(\\);\n        }\n\n        /*public string GetInteractionPrompt\\(\\)\n        {\n            return \"Changer Couleur\";\n        }*/\n    }\n}\n\n--------------------------------------------------------------------------------\n\nENDOFFILE)",
      "Bash(\"G:\\\\UnityGames\\\\VoidWarranty\\\\VoidWarranty_GDD_v0.6_Scripts_associated.txt\" << 'ENDOFINTERACTION1'\n\n--------------------------------------------------------------------------------\nFICHIER: GrabbableObject.cs\nPATH: Assets/_Game/Scripts/Interaction/GrabbableObject.cs\n--------------------------------------------------------------------------------\nusing UnityEngine;\nusing FishNet.Object;\nusing FishNet.Object.Synchronizing;\nusing VoidWarranty.Core;\n\nnamespace VoidWarranty.Interaction\n{\n    [RequireComponent\\(typeof\\(Rigidbody\\)\\)]\n    [RequireComponent\\(typeof\\(NetworkObject\\)\\)]\n    public class GrabbableObject : NetworkBehaviour, IInteractable\n    {\n        [SerializeField] protected ItemData _data;\n\n        protected Rigidbody _rb;\n        protected int _defaultLayer;\n\n        public readonly SyncVar<bool> IsHeld = new SyncVar<bool>\\(\\);\n\n        protected virtual void Awake\\(\\)\n        {\n            _rb = GetComponent<Rigidbody>\\(\\);\n            _defaultLayer = gameObject.layer;\n            _rb.interpolation = RigidbodyInterpolation.Interpolate;\n\n            if \\(_data != null\\)\n            {\n                _rb.mass = _data.Mass;\n                _rb.linearDamping = _data.LinearDamping;\n                _rb.angularDamping = _data.AngularDamping;\n            }\n\n            IsHeld.OnChange += OnHeldChanged;\n        }\n\n        private void OnDestroy\\(\\)\n        {\n            IsHeld.OnChange -= OnHeldChanged;\n        }\n\n        private void OnHeldChanged\\(bool oldValue, bool newValue, bool asServer\\)\n        {\n            if \\(newValue == true\\)\n            {\n                if \\(!base.IsOwner\\)\n                {\n                    _rb.isKinematic = true;\n                    _rb.useGravity = false;\n                }\n                else\n                {\n                    _rb.isKinematic = false;\n                    _rb.useGravity = false;\n                    _rb.linearDamping = 10f;\n                    _rb.angularDamping = 10f;\n                }\n                SetLayerRecursively\\(gameObject, LayerMask.NameToLayer\\(\"Ignore Raycast\"\\)\\);\n            }\n            else\n            {\n                _rb.isKinematic = false;\n                _rb.useGravity = true;\n                SetLayerRecursively\\(gameObject, _defaultLayer\\);\n\n                if \\(_data != null\\)\n                {\n                    _rb.linearDamping = _data.LinearDamping;\n                    _rb.angularDamping = _data.AngularDamping;\n                }\n                else\n                {\n                    _rb.linearDamping = 0f;\n                    _rb.angularDamping = 0.05f;\n                }\n            }\n        }\n\n        public virtual void OnGrabbed\\(Transform playerTransform\\)\n        {\n            if \\(base.IsServerInitialized\\) \n            {\n                IsHeld.Value = true;\n            }\n            else \n            {\n                ServerSetHeld\\(true\\);\n            }\n        }\n\n        public virtual void OnDropped\\(\\)\n        {\n            if \\(base.IsServerInitialized\\) \n            {\n                IsHeld.Value = false;\n            }\n            else \n            {\n                ServerSetHeld\\(false\\);\n            }\n        }\n\n        [ServerRpc\\(RequireOwnership = false\\)]\n        private void ServerSetHeld\\(bool state\\)\n        {\n            IsHeld.Value = state;\n        }\n\n        public Rigidbody GetRigidbody\\(\\) => _rb;\n        public ItemData GetData\\(\\) => _data;\n        public virtual void Interact\\(GameObject interactor\\) { }\n\n        private void SetLayerRecursively\\(GameObject obj, int newLayer\\)\n        {\n            if \\(obj == null\\) return;\n            obj.layer = newLayer;\n            foreach \\(Transform child in obj.transform\\)\n            {\n                if \\(child == null\\) continue;\n                SetLayerRecursively\\(child.gameObject, newLayer\\);\n            }\n        }\n\n        public virtual string GetInteractionPrompt\\(\\)\n        {\n            if \\(_data == null\\) return \"Unknown Object\";\n            string name = LocalizationManager.Get\\(_data.NameKey\\);\n            string action = LocalizationManager.Get\\(\"ACTION_TAKE\"\\);\n            return $\"{name}\\\\n<size=80%><color=yellow>[{action}]</color></size>\";\n        }\n    }\n}\n\n--------------------------------------------------------------------------------\n\nENDOFINTERACTION1)",
      "Bash(git add:*)"
    ]
  }
}
